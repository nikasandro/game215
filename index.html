<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Super Dino Game - Phaser</title>
  <script src="https://cdn.jsdelivr.net/npm/phaser@3.60.0/dist/phaser.min.js"></script>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: #f4f4f4;
      overflow: hidden;
      transition: background 0.3s;
    }

    #nightToggle, #soundToggle {
      position: absolute;
      top: 10px;
      left: 20px;
      font-size: 20px;
      cursor: pointer;
      padding: 5px 10px;
      background: #eee;
      border-radius: 10px;
      z-index: 10;
    }

    #soundToggle {
      left: 90px;
    }

    #score, #highscore {
      position: absolute;
      top: 10px;
      right: 20px;
      font-size: 20px;
      color: #333;
      z-index: 10;
    }

    #highscore {
      top: 40px;
    }

    #gameOver {
      display: none;
      position: absolute;
      top: 40%;
      left: 50%;
      transform: translate(-50%, -50%);
      text-align: center;
      z-index: 10;
    }

    #gameOver h1 {
      color: red;
      font-size: 48px;
    }

    #restart {
      margin-top: 10px;
      font-size: 20px;
      padding: 10px 20px;
      background: #444;
      color: #fff;
      border: none;
      border-radius: 10px;
      cursor: pointer;
    }

    .night {
      background: #111;
    }

    .night canvas {
      background: #222 !important;
    }

    .night #score,
    .night #highscore,
    .night #nightToggle,
    .night #soundToggle {
      color: #fff;
    }
  </style>
</head>
<body>
  <div id="nightToggle">ðŸŒ™</div>
  <div id="soundToggle">ðŸ”Š</div>
  <div id="score">Score: 0</div>
  <div id="highscore">High Score: 0</div>
  <div id="gameOver">
    <h1>Game Over!</h1>
    <button id="restart">Restart</button>
  </div>

  <script>
    const config = {
      type: Phaser.AUTO,
      width: window.innerWidth,
      height: window.innerHeight,
      physics: {
        default: 'arcade',
        arcade: {
          gravity: { y: 1000 },
          debug: false
        }
      },
      scene: {
        preload,
        create,
        update
      },
      backgroundColor: '#fff',
    };

    let game = new Phaser.Game(config);

    let dino, ground, cursors, score = 0, scoreText, highScore, obstacles, gameOver = false;
    let jumpSound, gameOverSound;
    let soundOn = true;
    let speed = 5;

    function preload() {
      this.load.image('dino', 'https://i.imgur.com/6n8MN1n.png');
      this.load.image('cactus', 'https://i.imgur.com/I3zF1mj.png');
      this.load.image('cloud', 'https://i.imgur.com/vg1pN2f.png');
      this.load.audio('jump', 'https://www.soundjay.com/button/beep-07.wav');
      this.load.audio('gameOver', 'https://www.soundjay.com/button/beep-10.wav');
    }

    function create() {
      // Ground as a visible rectangle
      ground = this.add.rectangle(0, config.height - 20, config.width, 20, 0x555555).setOrigin(0);
      this.physics.add.existing(ground, true);

      // Dino sprite
      dino = this.physics.add.sprite(100, config.height - 100, 'dino').setScale(0.25).setCollideWorldBounds(true);
      dino.body.setSize(dino.width * 0.5, dino.height);

      this.physics.add.collider(dino, ground);

      // Obstacle group
      obstacles = this.physics.add.group();
      this.physics.add.collider(dino, obstacles, () => {
        if (!gameOver) endGame(this);
      });

      cursors = this.input.keyboard.createCursorKeys();

      // Sounds
      jumpSound = this.sound.add('jump');
      gameOverSound = this.sound.add('gameOver');

      // Score display
      scoreText = this.add.text(20, 20, 'Score: 0', { fontSize: '20px', fill: '#333' }).setScrollFactor(0);

      highScore = localStorage.getItem('dinoHighScore') || 0;
      document.getElementById("highscore").textContent = `High Score: ${highScore}`;

      // Cloud spawner
      createCloud.call(this);

      // Obstacle spawner
      createObstacle.call(this);

      // Score timer
      this.time.addEvent({
        delay: 100,
        loop: true,
        callback: () => {
          if (!gameOver) {
            score++;
            scoreText.setText('Score: ' + score);
            document.getElementById("score").textContent = `Score: ${score}`;
            if (score % 100 === 0) speed += 1;
          }
        }
      });
    }

    function update() {
      if ((cursors.space.isDown || cursors.up.isDown) && dino.body.touching.down) {
        dino.setVelocityY(-500);
        if (soundOn) jumpSound.play();
      }

      obstacles.children.iterate(ob => {
        if (ob) {
          ob.x -= speed;
          if (ob.x + ob.width < 0) {
            obstacles.remove(ob, true, true);
          }
        }
      });
    }

    function createObstacle() {
      const obs = obstacles.create(config.width, config.height - 60, 'cactus').setScale(0.5);
      obs.body.allowGravity = false;
      obs.setImmovable(true);

      this.time.delayedCall(Phaser.Math.Between(1200, 2000), createObstacle, [], this);
    }

    function createCloud() {
      const cloud = this.add.image(config.width, Phaser.Math.Between(50, 150), 'cloud').setScale(0.5).setAlpha(0.5);
      this.tweens.add({
        targets: cloud,
        x: -100,
        duration: 20000,
        onComplete: () => cloud.destroy()
      });

      this.time.delayedCall(Phaser.Math.Between(2000, 5000), createCloud, [], this);
    }

    function endGame(scene) {
      gameOver = true;
      if (soundOn) gameOverSound.play();

      if (score > highScore) {
        highScore = score;
        localStorage.setItem('dinoHighScore', highScore);
      }

      document.getElementById("highscore").textContent = `High Score: ${highScore}`;
      document.getElementById("gameOver").style.display = "block";
    }

    // Restart game
    document.getElementById("restart").onclick = () => location.reload();

    // Night mode toggle
    document.getElementById("nightToggle").onclick = () => {
      document.body.classList.toggle("night");
      document.getElementById("nightToggle").textContent = document.body.classList.contains("night") ? "â˜€ï¸" : "ðŸŒ™";
    };

    // Sound toggle
    document.getElementById("soundToggle").onclick = () => {
      soundOn = !soundOn;
      document.getElementById("soundToggle").textContent = soundOn ? "ðŸ”Š" : "ðŸ”‡";
    };
  </script>
</body>
</html>









