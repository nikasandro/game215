<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Super Dino Game (Phaser)</title>
  <script src="https://cdn.jsdelivr.net/npm/phaser@3.55.2/dist/phaser.min.js"></script>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: #f4f4f4;
      overflow: hidden;
    }

    #gameContainer {
      position: relative;
      width: 100vw;
      height: 100vh;
      overflow: hidden;
    }

    canvas {
      display: block;
    }

    #score, #highscore {
      position: absolute;
      top: 10px;
      right: 20px;
      font-size: 20px;
      color: #333;
      z-index: 2;
    }

    #highscore {
      top: 40px;
    }

    #nightToggle, #soundToggle {
      position: absolute;
      top: 10px;
      left: 20px;
      font-size: 20px;
      cursor: pointer;
      padding: 5px 10px;
      background: #eee;
      border-radius: 10px;
      z-index: 2;
    }

    #soundToggle {
      left: 90px;
    }

    #gameOver {
      display: none;
      position: absolute;
      top: 40%;
      left: 50%;
      transform: translate(-50%, -50%);
      text-align: center;
      z-index: 3;
    }

    #gameOver h1 {
      color: red;
      font-size: 48px;
    }

    #restart {
      margin-top: 10px;
      font-size: 20px;
      padding: 10px 20px;
      background: #444;
      color: #fff;
      border: none;
      border-radius: 10px;
      cursor: pointer;
    }

    .night {
      background: #111;
    }

    .night #score, .night #highscore, .night #nightToggle, .night #soundToggle {
      color: #fff;
      background: #333;
    }
  </style>
</head>
<body>
  <div id="nightToggle">ðŸŒ™</div>
  <div id="soundToggle">ðŸ”Š</div>
  <div id="gameContainer">
    <div id="score">Score: 0</div>
    <div id="highscore">High Score: 0</div>
    <div id="gameOver">
      <h1>Game Over!</h1>
      <button id="restart">Restart</button>
    </div>
  </div>

  <script>
    let soundOn = true;
    let isNight = false;
    let gameOver = false;
    let score = 0;
    let highScore = localStorage.getItem("dinoHighScore") || 0;
    let speed = 300;

    document.getElementById("highscore").textContent = `High Score: ${highScore}`;

    const config = {
      type: Phaser.AUTO,
      width: window.innerWidth,
      height: window.innerHeight,
      parent: 'gameContainer',
      physics: {
        default: 'arcade',
        arcade: {
          gravity: { y: 1000 },
          debug: false
        }
      },
      scene: {
        preload,
        create,
        update
      }
    };

    const game = new Phaser.Game(config);

    let dino, obstacles, clouds;
    let cursors, scoreText;
    let jumpSound, gameOverSound;
    let paused = false;

    function preload() {
      this.load.image('dino', 'dinosaur.png');
      this.load.image('cactus', 'cactus.png');
      this.load.image('cloud', 'cloud.png');
      this.load.audio('jumpSound', 'https://www.soundjay.com/button/beep-07.wav');
      this.load.audio('gameOverSound', 'https://www.soundjay.com/button/beep-10.wav');
    }

    function create() {
      this.cameras.main.setBackgroundColor('#ffffff');

      jumpSound = this.sound.add('jumpSound');
      gameOverSound = this.sound.add('gameOverSound');

      // Clouds
      clouds = this.physics.add.group();
      this.time.addEvent({
        delay: 4000,
        loop: true,
        callback: () => {
          const cloud = this.physics.add.sprite(config.width + 60, Phaser.Math.Between(20, 80), 'cloud');
          cloud.setVelocityX(-30);
          cloud.setAlpha(0.5);
          cloud.setDepth(-1);
          clouds.add(cloud);
        }
      });

      // Dino
      dino = this.physics.add.sprite(100, config.height - 100, 'dino').setScale(1).setCollideWorldBounds(true);
      dino.setSize(48, 48);

      // Obstacles
      obstacles = this.physics.add.group();

      this.time.addEvent({
        delay: 1500,
        loop: true,
        callback: () => {
          if (!gameOver && !paused) {
            const obs = obstacles.create(config.width + 50, config.height - 50, 'cactus');
            obs.setVelocityX(-speed);
            obs.setSize(30, 50);
            obs.setImmovable(true);
          }
        }
      });

      cursors = this.input.keyboard.createCursorKeys();
      this.input.keyboard.on('keydown-P', () => paused = !paused);
      this.input.keyboard.on('keydown-SPACE', jump);
      this.input.on('pointerdown', jump);

      this.physics.add.collider(dino, obstacles, () => {
        if (!gameOver) handleGameOver(this);
      });

      this.time.addEvent({
        delay: 100,
        loop: true,
        callback: () => {
          if (!paused && !gameOver) {
            score++;
            document.getElementById("score").textContent = `Score: ${score}`;
            if (score % 100 === 0) speed += 20;
          }
        }
      });

      // Restart
      document.getElementById("restart").onclick = () => location.reload();
    }

    function update() {
      if (paused || gameOver) return;

      // Jump logic
      if (cursors.up.isDown && dino.body.touching.down) {
        jump();
      }

      // Cleanup
      obstacles.getChildren().forEach(obs => {
        if (obs.x < -50) obs.destroy();
      });

      clouds.getChildren().forEach(cloud => {
        if (cloud.x < -100) cloud.destroy();
      });
    }

    function jump() {
      if (!gameOver && dino.body.touching.down) {
        dino.setVelocityY(-500);
        if (soundOn) jumpSound.play();
      }
    }

    function handleGameOver(scene) {
      gameOver = true;
      if (soundOn) gameOverSound.play();
      document.getElementById("gameOver").style.display = "block";
      if (score > highScore) {
        highScore = score;
        localStorage.setItem("dinoHighScore", highScore);
        document.getElementById("highscore").textContent = `High Score: ${highScore}`;
      }
    }

    // Night toggle
    document.getElementById("nightToggle").onclick = () => {
      isNight = !isNight;
      document.body.classList.toggle("night");
      game.scene.scenes[0].cameras.main.setBackgroundColor(isNight ? "#222" : "#ffffff");
      document.getElementById("nightToggle").textContent = isNight ? "â˜€ï¸" : "ðŸŒ™";
    };

    // Sound toggle
    document.getElementById("soundToggle").onclick = () => {
      soundOn = !soundOn;
      document.getElementById("soundToggle").textContent = soundOn ? "ðŸ”Š" : "ðŸ”‡";
    };
  </script>
</body>
</html>


